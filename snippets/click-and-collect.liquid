{% comment %}
@name: Retail Express Click and Collect
@version: 1.0.0
{% endcomment %}



<!-- Scripts -->

{{ 'api.jquery.js' | shopify_asset_url | script_tag }}
 {{ 'click-and-collect-es6.js' | asset_url | script_tag }}
  

<!-- Stylesheets -->

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
 {{ 'click-and-collect.css' | asset_url | stylesheet_tag }}

<!-- Inline scripts -->

<script type="text/javascript">
 function initCnc() {
 clickAndCollectSettings = {
 subdomain: '{{ shop.permanent_domain }}'.split('.', 1),
 apiPrefix: 'shopify.retailexpress.com.au',
 showQuantity: false,
 enableMap: false
 };

 {% if template.name == 'product' or template.name == 'pre-order'%}
    {% if product.variants.first.inventory_quantity != 0 %}
  window.cnc = new ClickAndCollectProduct(clickAndCollectSettings, '{{ product.selected_or_first_available_variant.id }}');
    {% endif %}
{% else %}
  window.cnc = new ClickAndCollectCart(clickAndCollectSettings);
{% endif %}
 }
 function initMap() {
 if (window.cnc) {
 window.cnc.mapReady();
 } else {
 window.mapIsReady = true;
 }
 }
 document.addEventListener("DOMContentLoaded", function(event) {
 if (!document.getElementById('cnc-container')) {
 console.log('Click and Collect element not found.');
 } else {
 initCnc();
 }
 });

</script>
